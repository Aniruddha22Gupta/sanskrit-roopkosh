<!DOCTYPE html>
<html lang="hi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>‡§∏‡§Ç‡§∏‡•ç‡§ï‡•É‡§§ ‡§∞‡•Ç‡§™‡§ï‡•ã‡§∑</title>
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link rel="shortcut icon" type="image/png" href="https://raw.githubusercontent.com/Aniruddha22Gupta/Aniruddha22Gupta/0ab97510de4bf75e7ae78fb89a95c323e565dc17/icon.png">

  <style>
    html {
      scroll-behavior: smooth;
    }
    body {
      font-family: 'Noto Sans Devanagari', sans-serif;
      background: linear-gradient(135deg, #f0f4ff, #e8f9f0);
      display: flex;
      justify-content: center;
      align-items: flex-start;
      padding: 30px;
      margin: 0;
    }

    .container {
      background: #fff;
      padding: 30px;
      border-radius: 20px;
      box-shadow: 0 8px 20px rgba(0,0,0,0.15);
      max-width: 1000px;
      width: 100%;
      text-align: center;
    }

    h1 { font-size: 26px; margin-bottom: 20px; color: #2c3e50; }
    label { display: block; font-size: 18px; margin-top: 15px; margin-bottom: 5px; color: #34495e; }
    input, select {
      width: 90%;
      padding: 12px;
      margin-bottom: 20px;
      border-radius: 10px;
      border: 1px solid #bdc3c7;
      font-size: 16px;
    }

    .toggle {
      display: inline-flex;
      align-items: center;
      gap: 20px;
      font-family: Arial, sans-serif;
      font-size: 16px;
      cursor: pointer;
    }
    .toggle input[type="checkbox"] { width: 12px; height: 12px; margin: 0; }
    .toggle label { cursor: pointer; margin-top: 7px; }

    .hidden { display: none; }

    .table-container {
      max-width: 900px;
      margin: 30px auto;
      overflow-x: auto;
      border: 1px solid #ccc;
      padding: 10px;
      background: #fff;
      border-radius: 10px;
    }

    table { border-collapse: collapse; width: 100%; }
    th, td { border: 1px solid #999; padding: 8px; text-align: center; }
    th { background: #3498db; color: white; }

    .source-link {
      margin-top: 5px;
      display: block;
      font-size: 14px;
    }

    button { margin: 20px; border-radius: 10px; cursor: pointer; }
    .normal-button {
      width: 90%;
      font-size: 16px;
      padding: 12px;
      border: 1px solid #3498db;
      background-color: #3498db;
      color: white;
    }

    .normal-button:hover { background-color: #0084dc; }

    .float-button {
      position: fixed;
      border-radius: 50%;
      font-size: 30px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    #top-button {
      display: none;
      bottom: 30px;
      left: 20px;
      width: 75px;
      height: 75px;
      border: 1px solid #3498db;
      background-color: #3498db;
    }
    #about-button {
      bottom: 30px;
      right: 20px;
      width: 75px;
      height: 75px;
      border: 1px solid #3498db;
      background-color: #3498db;
    }

    i { color: #f0f4ff; }

    .loader {
      border: 4px solid #f3f3f3;
      border-top: 4px solid #3498db;
      border-radius: 50%;
      width: 25px;
      height: 25px;
      animation: spin 1s linear infinite;
      margin: 15px auto;
    }

    .about-box {
      display: none;
      width: 50%;
      max-width: 500px;
      height: 70%;
      max-height: 500px;
      padding: 25px;
      background: #fff;
      border: 1px solid #ccc;
      border-radius: 12px;
      position: fixed;
      bottom: 100px;
      right: 20px;
      font-family: Arial, sans-serif;
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
      overflow-y: auto;
      transition: all 0.3s ease;
      z-index: 9999;
    }
    .about-box h2 {
      margin-top: 0;
      font-size: 1.3rem;
      color: #2c3e50;
    }
    .about-box p {
      font-size: 0.95rem;
      color: #333;
      line-height: 1.4;
    }
    .about-box a {
      color: #3498db;
      text-decoration: none;
    }
    .about-box a:hover {
      text-decoration: underline;
    }

    .about-video {
      width: 100%;
      aspect-ratio: 500/360;
      border-radius: 10px;
      margin-top: 10px;
    }

    .video-container {
      position: relative;
      width: 100%;
      padding-bottom: 72%;
      height: 0;
      overflow: hidden;
      border-radius: 10px;
      margin-top: 10px;
    }

    .video-container iframe {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      border: none;
      border-radius: 10px;
    }
      
    .close-btn {
      position: absolute;
      top: 10px;
      right: 12px;
      border: none;
      background: none;
      font-size: 28px;
      cursor: pointer;
      color: #555;
      transition: color 0.2s ease;
    }
    .close-btn:hover { color: #000; }

    @media (max-width: 768px) {
      .about-box {
        width: 100%;
        height: 100%;
        max-height: none;
        max-width: none;
        bottom: 0;
        right: 0;
        left: 0;
        top: 0;
        border-radius: 0;
        border: none;
        box-shadow: none;
        background: #fff;
        padding: 24px;
        padding-right: 100px;
      }
      .video-container {
        width: 92%;
        height: auto;
        padding-bottom: 72%;
      }
      .close-btn {
        right: 150px;
      }
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
  </style>
</head>

<body>
  <div class="container">
    <h1>‡§∏‡§Ç‡§∏‡•ç‡§ï‡•É‡§§ ‡§∞‡•Ç‡§™‡§ï‡•ã‡§∑</h1>
    <h3 style="text-align: end; margin-right: 100px;">Made by Aniruddha Gupta</h3>

    <div class="toggle">
      <input type="checkbox" id="toggleWord">
      <label for="toggleWord">‡§ï‡•ç‡§Ø‡§æ ‡§Ø‡•á ‡§∂‡§¨‡•ç‡§¶ ‡§∞‡•Ç‡§™ ‡§π‡•à?</label>
    </div>

    <label id="textboxLabel" for="rootWord">‡§ß‡§æ‡§§‡•Å ‡§ï‡§æ ‡§Æ‡•Ç‡§≤ ‡§∞‡•Ç‡§™</label>
    <input type="text" id="rootWord" placeholder="‡§Ø‡§π‡§æ‡§Å ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç ‡§¶‡•á‡§µ‡§®‡§æ‡§ó‡§∞‡•Ä ‡§Æ‡•á‡§Ç (‡§ï‡•ã‡§à ‡§≠‡•Ä ‡§Ü‡§Æ‡§§‡•å‡§∞ ‡§™‡§∞ ‡§ú‡§æ‡§®‡§æ/‡§µ‡•à‡§ß ‡§°‡§æ‡§≤‡•á‡§Ç)">

    <div id="shabdTypeSection" class="hidden">
      <label for="shabdType">‡§∂‡§¨‡•ç‡§¶ ‡§™‡•ç‡§∞‡§ï‡§æ‡§∞ ‡§ö‡•Å‡§®‡•á‡§Ç</label>
      <select id="shabdType">
        <option value="noun">‡§∏‡§Ç‡§ú‡•ç‡§û‡§æ (Noun)</option>
        <option value="pronoun">‡§∏‡§∞‡•ç‡§µ‡§®‡§æ‡§Æ (Pronoun)</option>
      </select>
    </div>

    <div id="lakaraSection">
      <label for="lakara">‡§ß‡§æ‡§§‡•Å ‡§ï‡•á ‡§≤‡§ï‡§æ‡§∞ ‡§ï‡§æ ‡§ö‡§Ø‡§® ‡§ï‡§∞‡•á‡§Ç</label>
      <select id="lakara">
        <option>‡§≤‡§ü‡•ç ‡§≤‡§ï‡§æ‡§∞</option>
        <option>‡§≤‡•É‡§ü‡•ç ‡§≤‡§ï‡§æ‡§∞</option>
        <option>‡§≤‡§ô‡•ç ‡§≤‡§ï‡§æ‡§∞</option>
        <option>‡§≤‡•ã‡§ü‡•ç ‡§≤‡§ï‡§æ‡§∞</option>
        <option>‡§µ‡§ø‡§ß‡§ø‡§≤‡§ø‡§ô‡•ç ‡§≤‡§ï‡§æ‡§∞</option>
        <option>‡§≤‡§ø‡§ü‡•ç ‡§≤‡§ï‡§æ‡§∞</option>
        <option>‡§≤‡•Å‡§ü‡•ç ‡§≤‡§ï‡§æ‡§∞</option>
        <option>‡§Ü‡§∂‡•Ä‡§∞‡•ç‡§≤‡§ø‡§ô‡•ç ‡§≤‡§ï‡§æ‡§∞</option>
        <option>‡§≤‡•Å‡§ô‡•ç ‡§≤‡§ï‡§æ‡§∞</option>
        <option>‡§≤‡•É‡§ô‡•ç ‡§≤‡§ï‡§æ‡§∞</option>
        <option>All Class 9 & 10 NCERT</option>
      </select>
    </div>

    <button class="normal-button" onclick="openTable()">‡§§‡§æ‡§≤‡§ø‡§ï‡§æ ‡§¶‡§ø‡§ñ‡§æ‡§è‡§Å (‡§Ö‡§ó‡§∞ ‡§§‡§æ‡§≤‡§ø‡§ï‡§æ ‡§® ‡§Ü‡§è, ‡§á‡§∏‡•á ‡§ï‡§Æ ‡§∏‡•á ‡§ï‡§Æ ‡§§‡•Ä‡§® ‡§¨‡§æ‡§∞ ‡§¶‡§¨‡§æ‡§è)</button>

    <div class="table-container" id="tableResult">üëâ ‡§Ø‡§π‡§æ‡§Å ‡§§‡§æ‡§≤‡§ø‡§ï‡§æ ‡§¶‡§ø‡§ñ‡•á‡§ó‡•Ä...</div>
  </div>

  <!-- Floating Buttons -->
  <button class="float-button" id="top-button"
    onclick="document.body.scrollTop = 0; document.documentElement.scrollTop = 0;">
    <i class="material-icons" style="font-size: 36px;">keyboard_arrow_up</i>
  </button>

  <button class="float-button" id="about-button"
    onclick="document.getElementById('about-box').style.display='block'">
    <i class="material-icons" style="font-size: 36px;">info</i>
  </button>

  <!-- About Box -->
  <div class="about-box" id="about-box">
    <button class="close-btn" onclick="document.getElementById('about-box').style.display='none'">‚úï</button>
    <h2>About ‡§∏‡§Ç‡§∏‡•ç‡§ï‡•É‡§§ ‡§∞‡•Ç‡§™‡§ï‡•ã‡§∑</h2>
    <p>
      This tool is made by <strong>Aniruddha Gupta</strong> (‡§Ö‡§®‡§ø‡§∞‡•Å‡§¶‡•ç‡§ß ‡§ó‡•Å‡§™‡•ç‡§§‡§æ).<br>
      Powered by <a href="https://sanskritabhyas.in/hi" target="_blank">SanskritAbhyas</a>.
    </p>
    <div class="video-container">
      <iframe
        src="https://www.youtube.com/embed/lyZhgMm9KIo"
        title="‡§ï‡•ã‡§à ‡§≠‡•Ä ‡§∂‡§¨‡•ç‡§¶ ‡§∞‡•Ç‡§™ ‡§Ø‡§æ ‡§ß‡§æ‡§§‡•Å ‡§∞‡•Ç‡§™‡•ã‡§Ç ‡§ï‡•ã ‡§§‡•Å‡§∞‡§Ç‡§§ ‡§ñ‡•ã‡§≤‡•á‡§Ç"
        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
        referrerpolicy="strict-origin-when-cross-origin"
        allowfullscreen>
      </iframe>
    </div>
  </div>

  <script>
    const toggleWord = document.getElementById("toggleWord");
    const textboxLabel = document.getElementById("textboxLabel");
    const lakaraSection = document.getElementById("lakaraSection");
    const shabdTypeSection = document.getElementById("shabdTypeSection");
    const scrollToTopButton = document.getElementById("top-button");
    let dhatuValidated = false;

    window.addEventListener('scroll', function() {
      if (window.pageYOffset > 100) {
        scrollToTopButton.style.display = 'block';
      } else {
        scrollToTopButton.style.display = 'none';
      }
    });

    toggleWord.addEventListener("change", () => {
      if (toggleWord.checked) {
        textboxLabel.textContent = "‡§∂‡§¨‡•ç‡§¶ ‡§ï‡§æ ‡§Æ‡•Ç‡§≤ ‡§∞‡•Ç‡§™";
        lakaraSection.classList.add("hidden");
        shabdTypeSection.classList.remove("hidden");
      } else {
        textboxLabel.textContent = "‡§ß‡§æ‡§§‡•Å ‡§ï‡§æ ‡§Æ‡•Ç‡§≤ ‡§∞‡•Ç‡§™";
        lakaraSection.classList.remove("hidden");
        shabdTypeSection.classList.add("hidden");
      }
    });

    async function openTable() {
      const word = document.getElementById("rootWord").value.trim();
      if (!word) return alert("‡§ï‡•É‡§™‡§Ø‡§æ ‡§∂‡§¨‡•ç‡§¶/‡§ß‡§æ‡§§‡•Å ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç");

      const isShabd = toggleWord.checked;
      const tableContainer = document.getElementById("tableResult");
      tableContainer.innerHTML = "";

      const fetchTable = async (url, heading = null) => {
        const loader = document.createElement("div");
        loader.className = "loader";
        tableContainer.appendChild(loader);

        try {
          const proxyUrl = `https://api.allorigins.win/get?url=${encodeURIComponent(url)}`;
          const res = await fetch(proxyUrl);
          const data = await res.json();
          const doc = new DOMParser().parseFromString(data.contents, "text/html");
          const tableDiv = doc.querySelector(isShabd ? "#divFullAnswer" : ".divFullAnswerxs.col-12.d-lg-none");

          loader.remove();

          if (!tableDiv) {
            const p = document.createElement("p");
            p.textContent = heading ? `${heading} - ‡§ï‡•ã‡§à ‡§§‡§æ‡§≤‡§ø‡§ï‡§æ ‡§®‡§π‡•Ä‡§Ç ‡§Æ‡§ø‡§≤‡•Ä` : "‡§ï‡•ã‡§à ‡§§‡§æ‡§≤‡§ø‡§ï‡§æ ‡§®‡§π‡•Ä‡§Ç ‡§Æ‡§ø‡§≤‡•Ä";
            tableContainer.appendChild(p);
            return;
          }

          if (heading) {
            const h = document.createElement("h3");
            h.textContent = heading;
            tableContainer.appendChild(h);
          }
          const table = document.createElement("table");
          const tbody = document.createElement("tbody");
          table.appendChild(tbody);

          let sambodhanRow = null;
          const rows = [];

          tableDiv.querySelectorAll(":scope > div").forEach(rowDiv => {
            const tr = document.createElement("tr");
            Array.from(rowDiv.children).forEach(cell => {
              const td = document.createElement("td");
              td.textContent = cell.textContent.trim();
              tr.appendChild(td);
            });
            
            if (tr.firstChild && tr.firstChild.textContent.includes('‡§∏‡§Ç‡§¨‡•ã‡§ß‡§®')) {
              Array.from(tr.children).forEach((td, index) => {
                if (index > 0) {
                  const text = td.textContent.trim();
                  if (text) {
                    td.textContent = `‡§π‡•á ${text}!`;
                  }
                }
              });
              sambodhanRow = tr;
            } else {
              rows.push(tr);
            }
          });

          rows.forEach(tr => tbody.appendChild(tr));

          if (sambodhanRow) {
            tbody.appendChild(sambodhanRow);
          }

          tableContainer.appendChild(table);

          const sourceLink = document.createElement("a");
          sourceLink.href = url;
          sourceLink.target = "_blank";
          sourceLink.textContent = "üîó ‡§Æ‡•Ç‡§≤ ‡§∏‡§æ‡§á‡§ü ‡§™‡§∞ ‡§¶‡•á‡§ñ‡•á‡§Ç";
          sourceLink.className = "source-link";
          tableContainer.appendChild(sourceLink);

        } catch (err) {
          loader.remove();

          if (!dhatuValidated && !silentFail) {
            const p = document.createElement("p");
            p.style.color = "red";
            p.textContent = heading
              ? `${heading} - ‚ùå ‡§°‡•á‡§ü‡§æ ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§ ‡§ï‡§∞‡§®‡•á ‡§Æ‡•á‡§Ç ‡§§‡•ç‡§∞‡•Å‡§ü‡§ø`
              : "‚ùå ‡§°‡•á‡§ü‡§æ ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§ ‡§ï‡§∞‡§®‡•á ‡§Æ‡•á‡§Ç ‡§§‡•ç‡§∞‡•Å‡§ü‡§ø";
            tableContainer.appendChild(p);

            const sourceLink = document.createElement("a");
            sourceLink.href = url;
            sourceLink.target = "_blank";
            sourceLink.textContent = "üîó ‡§Æ‡•Ç‡§≤ ‡§∏‡§æ‡§á‡§ü ‡§™‡§∞ ‡§¶‡•á‡§ñ‡•á‡§Ç";
            sourceLink.className = "source-link";
            tableContainer.appendChild(sourceLink);
            console.error(err);
          }
        }
      };

      if (isShabd) {
        const shabdType = document.getElementById("shabdType").value;
        const url = shabdType === "noun"
          ? `https://sanskritabhyas.in/hi/Noun/View/${word}`
          : `https://sanskritabhyas.in/hi/Pronoun/View/${word}`;
        await fetchTable(url, shabdType === "noun" ? "‡§∏‡§Ç‡§ú‡•ç‡§û‡§æ" : "‡§∏‡§∞‡•ç‡§µ‡§®‡§æ‡§Æ");
      } else {
        const lakaraSelect = document.getElementById("lakara").value;
        if (lakaraSelect === "All Class 9 & 10 NCERT") {
          const mainLakara = "‡§≤‡§ü‡•ç";
          const otherLakara = ["‡§≤‡•É‡§ü‡•ç", "‡§≤‡§ô‡•ç", "‡§≤‡•ã‡§ü‡•ç", "‡§µ‡§ø‡§ß‡§ø‡§≤‡§ø‡§ô‡•ç"];
        
          tableContainer.innerHTML = "";
        
          let latDone = false;
          while (!latDone) {
            const before = tableContainer.children.length;
        
            await fetchTable(
              `https://sanskritabhyas.in/hi/Verb/View/${word}/All/${mainLakara}`,
              mainLakara
            );
        
            const after = tableContainer.children.length;
            latDone = after > before;
            
            if (latDone) {
              dhatuValidated = true;
            }
          }
        
          for (const l of otherLakara) {
            let done = false;
        
            while (!done) {
              const before = tableContainer.children.length;
        
              await fetchTable(
                `https://sanskritabhyas.in/hi/Verb/View/${word}/All/${l}`,
                l,
                true 
              );
        
              const after = tableContainer.children.length;
              done = after > before;
            }
          }
        } else {
          const l = lakaraSelect.split(" ")[0];
          const url = `https://sanskritabhyas.in/hi/Verb/View/${word}/All/${l}`;
          await fetchTable(url, l);
        }
      }
    }
  </script>
</body>
</html>
